var arrayQuizAnswers=[],arrayQuizResults=[],quizAnsweredQuestions=[],quizUserAnswers=[],quizCorrectCount=0,isLastQuestionAnswered=!1;function getQuizAnswers(s){var e={post_id:s};$.ajax({type:"POST",url:VrConfig.baseURL+"/AjaxController/getQuizAnswers",data:setAjaxData(e),success:function(s){var e=JSON.parse(s);1==e.result&&(arrayQuizAnswers=e.arrayQuizAnswers)}})}function getQuizResults(s){var e={post_id:s};$.ajax({type:"POST",url:VrConfig.baseURL+"/AjaxController/getQuizResults",data:setAjaxData(e),success:function(s){var e=JSON.parse(s);1==e.result&&(arrayQuizResults=e.arrayQuizResults)}})}function showTriviaQuizResult(){if(arrayQuizResults.length>0){var s,e="";if(0==quizCorrectCount){var r=arrayQuizResults[0][1];e=arrayQuizResults[0][3];for(s=0;s<arrayQuizResults.length;s++)if(r>arrayQuizResults[s][1])r=arrayQuizResults[s][1],e=arrayQuizResults[s][3]}else for(s=0;s<arrayQuizResults.length;s++)if(quizCorrectCount>=arrayQuizResults[s][1]&&quizCorrectCount<=arrayQuizResults[s][2])e=arrayQuizResults[s][3];e.length>0&&(e='<p class="quiz-score"><span class="correct">'+VrConfig.textCorrectAnswer+": <b>"+quizCorrectCount+'</b></span> <span class="wrong">'+VrConfig.textWrongAnswer+": <b>"+(quizAnsweredQuestions.length-quizCorrectCount)+"</b></span></p>"+e,document.getElementById("quiz_result_container").innerHTML=e,$(".btn-play-again-content").show())}}function showPersonalityQuizResult(){var s,e,r=getMaxOccurredArrayValue(quizUserAnswers);for(r.length<1&&(r=quizUserAnswers[0]),e=0;e<arrayQuizResults.length;e++)if(r==arrayQuizResults[e][0]){s=arrayQuizResults[e][3];break}s.length>0&&(document.getElementById("quiz_result_container").innerHTML=s,$(".btn-play-again-content").show())}function checkQuizQuestionAnswer(s,e){var r;for(r=0;r<arrayQuizAnswers.length;r++)if(arrayQuizAnswers[r][0]==s&&arrayQuizAnswers[r][1]==e)return!0;return!1}function getQuizQuestionAnswerId(s){var e;for(e=0;e<arrayQuizAnswers.length;e++)if(arrayQuizAnswers[e][0]==s)return arrayQuizAnswers[e][1]}function getMaxOccurredArrayValue(s){var e={},r=0;for(var t in s)e[s[t]]=(e[s[t]]||0)+1,e[s[t]]>r&&(r=e[s[t]],s[t]);for(var i in e)if(e[i]==r)return i}$(document).on("click",".quiz-question .answer_trivia_quiz",(function(){var s=$(this).attr("data-question-id"),e=$(this).attr("data-answer-id");if(arrayQuizAnswers.length<1)return!1;if(-1!==jQuery.inArray(s,quizAnsweredQuestions))return!1;if($("#question_answer_"+e+" .quiz-answer-icon").removeClass("icon-circle-outline"),checkQuizQuestionAnswer(s,e))quizCorrectCount+=1,$(this).addClass("answer-correct"),$("#question_answer_"+e+" .quiz-answer-icon").addClass("icon-check-circle"),$("#quiz_question_"+s+" .alert-success").show();else{var r=getQuizQuestionAnswerId(s);$(this).addClass("answer-wrong"),$("#question_answer_"+e+" .quiz-answer-icon").addClass("icon-close-circle"),$("#question_answer_"+r).addClass("answer-correct"),$("#question_answer_"+r+" .quiz-answer-icon").removeClass("icon-circle-outline"),$("#question_answer_"+r+" .quiz-answer-icon").addClass("icon-check-circle"),$("#quiz_question_"+s+" .alert-danger").show()}if($("#quiz_question_"+s).addClass("quiz-question-answered"),quizAnsweredQuestions.push(s),1==$("#quiz_question_"+s).attr("data-is-last-question")&&(isLastQuestionAnswered=!0),isLastQuestionAnswered){var t="quiz_result_container";$(".quiz-question").each((function(s){$(this).hasClass("quiz-question-answered")||(t=$(this).attr("id"))})),"quiz_result_container"==t&&setTimeout((function(){showTriviaQuizResult()}),1e3),setTimeout((function(){$("html, body").animate({scrollTop:$("#"+t).offset().top},500)}),700)}})),$(document).on("click",".quiz-question .answer_personality_quiz",(function(){var s=$(this).attr("data-question-id"),e=$(this).attr("data-answer-id"),r=$(this).attr("data-answer-assigned-id");if($("#question_answer_"+e+" .quiz-answer-icon").removeClass("icon-circle-outline"),$(this).addClass("answer-correct"),$("#question_answer_"+e+" .quiz-answer-icon").addClass("icon-check-circle"),$("#quiz_question_"+s).addClass("quiz-question-answered"),quizAnsweredQuestions.push(s),quizUserAnswers.push(r),1==$("#quiz_question_"+s).attr("data-is-last-question")&&(isLastQuestionAnswered=!0),isLastQuestionAnswered){var t="quiz_result_container";$(".quiz-question").each((function(s){$(this).hasClass("quiz-question-answered")||(t=$(this).attr("id"))})),"quiz_result_container"==t&&setTimeout((function(){showPersonalityQuizResult()}),1e3),setTimeout((function(){$("html, body").animate({scrollTop:$("#"+t).offset().top},500)}),700)}})),$(document).on("click",".quiz-question .answer_poll",(function(){var s=$(this).attr("data-question-id"),e=$(this).attr("data-answer-id"),r=$(this).attr("data-answer-answer-format"),t=$("#quiz_question_"+s).attr("data-is-poll-public");if(1!=VrConfig.authCheck&&0==t)return $("#modalLogin").modal("show"),!1;$("#question_answer_"+e+" .quiz-answer-icon").removeClass("icon-circle-outline"),$(this).addClass("answer-correct"),$("#question_answer_"+e+" .quiz-answer-icon").addClass("icon-check-circle"),$("#quiz_question_"+s).addClass("quiz-question-answered");var i={question_id:s,answer_id:e,answer_format:r};$.ajax({type:"POST",url:VrConfig.baseURL+"/AjaxController/addPostPollVote",data:setAjaxData(i),success:function(e){var t=JSON.parse(e);if(1==t.result&&(t.arrayVotes&&t.arrayVotes.forEach((e=>{"text"===r?($("#ans_progress_"+e.answerId).html('<div class="progress"><div class="progress-bar" style="width: '+e.percentage+'%"></div></div>'),$("#text_op_num_votes_"+e.answerId).text(e.percentage+"%")):0==e.percentage?$("#ans_progress_"+e.answerId).html('<div class="progress"><b class="perc-zero">0%</b><div class="progress-bar" style="width: 0%"></div></div>'):$("#ans_progress_"+e.answerId).html('<div class="progress"><div class="progress-bar" style="width: '+e.percentage+'%"><b>'+e.percentage+"%</b></div></div>"),$("#question_votes_"+s).text(t.totalVotes)})),quizAnsweredQuestions.push(s),1==$("#quiz_question_"+s).attr("data-is-last-question")&&(isLastQuestionAnswered=!0),isLastQuestionAnswered)){var i="quiz_result_container";$(".quiz-question").each((function(s){$(this).hasClass("quiz-question-answered")||(i=$(this).attr("id"))})),"quiz_result_container"!==i&&setTimeout((function(){$("html, body").animate({scrollTop:$("#"+i).offset().top},500)}),700)}}})}));